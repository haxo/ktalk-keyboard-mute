# KeyboardMute - Changelog

## [v1.2] - 2024-12-19 - Plate Implementation Attempts

### Новые подходы для создания плашки

#### Подход 1: NSVisualEffectView (текущий)
- Использует NSVisualEffectView с material .hudWindow
- Размытый фон как в системных уведомлениях
- Правильные настройки окна (.utilityWindow, .floating level)
- Закругленные углы (20px radius)
- Плавные анимации появления/исчезновения

#### Подход 2: NSPanel (запланирован)
- Использование NSPanel вместо NSWindow
- Специальные настройки для системных уведомлений
- Возможные лучшие результаты для плашки

#### Подход 3: NSView с Core Animation (запланирован)
- Создание плашки через Core Animation
- Более низкоуровневый контроль анимации
- Возможность точного воспроизведения системного стиля

#### Подход 4: NSStatusBar временное уведомление (запланирован)
- Использование встроенных возможностей NSStatusBar
- Создание временного popup уведомления
- Интеграция с системным статус-баром

### Изменения в коде
- Добавлена функция `showMicrophonePlate()`
- Добавлена функция `createVisualEffectPlate()`
- Использование NSVisualEffectView для размытого фона
- Правильные настройки окна для системного вида
- Улучшенные анимации с правильными timing functions

### Результаты тестирования

#### ❌ Подход 1: NSVisualEffectView - НЕ РАБОТАЕТ
- **Проблема**: Segmentation fault при использовании NSVisualEffectView
- **Ошибка**: `-[__NSCFType _runningWindowTransformAnimation]: unrecognized selector`
- **Статус**: Отключен

#### ❌ Подход 2: NSPanel - НЕ ТЕСТИРОВАН
- **Статус**: Готов к тестированию, но может вызывать аналогичные ошибки

#### ❌ Подход 3: Core Animation - НЕ ТЕСТИРОВАН  
- **Статус**: Готов к тестированию, но может вызывать аналогичные ошибки

#### ✅ Подход 4: NSStatusBar - РАБОТАЕТ
- **Статус**: Активный, стабильный
- **Описание**: Создает эффект плашки через изменение иконки в статус-баре
- **Особенности**: 
  - Увеличение размера иконки (32x32px)
  - Изменение цвета (красный/зеленый)
  - Пульсация прозрачности
  - Плавные анимации

### Текущее состояние
- **Активный подход**: NSStatusBar (подход 4)
- **Статус**: Стабильно работает
- **Эффект плашки**: Создается через анимацию иконки в статус-баре
